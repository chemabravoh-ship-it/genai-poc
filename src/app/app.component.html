<div
  class="fullscreen"
  [class.fade-out]="fade"
  [class.widget-mode]="widgetMode"
>
  <div class="circular-light"></div>
  <div class="circular-light"></div>
  <div class="circular-light"></div>
  <div class="fullscreen-content">
    <bs-logo
      type="bs"
      size="md"
      color="white"
      class="md bs hydrated"
      tabindex="0"
    ></bs-logo>
    <div style="display: flex; justify-content: center; align-items: center">
      <h2>{{ "GenAI Chatbot" | typing | async }}</h2>
      <span class="cursor"></span>
    </div>
    <div>
      <bs-dropdown
        class="mb-sm"
        [options]="[]"
        id="domain"
        name="domain"
        [label]="'Dominio'"
      >
      </bs-dropdown>
      <bs-dropdown
        [options]="[]"
        id="subdomain"
        name="subdomain"
        [label]="'Subdominio'"
        disabled
      >
      </bs-dropdown>
    </div>
    <button (click)="hide()">Chatear</button>
  </div>
</div>

<button class="widget-toggle" (click)="toggleWidget()" *ngIf="!widgetMode">
  ğŸ’¬
</button>

<!-- SIDEBAR -->
<div class="sidebar" [class.widget-mode]="widgetMode">
  <div class="brand">
    <bs-logo
      symbol=""
      type="bs"
      size="xs"
      color="white"
      class="xs bs symbol"
      tabindex="0"
    ></bs-logo>
  </div>
  <div class="sidebar-actions">
    <button class="new-chat-btn">â• Nuevo Chat</button>
    <button class="search-chat-btn">ğŸ” Buscar Chat</button>
  </div>
  <div class="history">
    <h2>Historial</h2>
    <ul class="history-list">
      <li><button>ğŸ’¬ Chat sobre Banc Sabadell</button></li>
      <li><button>ğŸ’¬ Dame un contrato para una cuenta</button></li>
      <li><button>ğŸ’¬ Dame un contrato</button></li>
    </ul>
  </div>
  <div class="settings">
    <button>âš™ï¸ ConfiguraciÃ³n</button>
    <button>ğŸšª Cerrar sesiÃ³n</button>
  </div>
</div>

<!-- MAIN CHAT -->
<div class="main-container" [class.widget-mode]="widgetMode">
  <main class="chat-wrap">
    <div class="chat-header">
      <bs-logo
        symbol=""
        type="bs"
        size="xs"
        color="white"
        class="xs bs symbol"
        tabindex="0"
      ></bs-logo>
      <div class="title">GenAI Chatbot</div>
      <div class="actions">
        <button class="share-btn">ğŸ”— Compartir</button>
        <button class="menu-btn">â‹¯</button>
        <button
          *ngIf="widgetMode"
          class="close-widget-btn"
          (click)="toggleWidget()"
        >
          âœ–ï¸
        </button>
      </div>
    </div>
    <section #messages class="messages">
      <div *ngFor="let msg of messagesList" class="msg" [ngClass]="msg.role">
        <ng-container *ngIf="msg.role === 'assistant'; else normalText">
          {{ msg.text | typing | async }}
        </ng-container>
        <ng-template #normalText>
          {{ msg.text }}
        </ng-template>
      </div>
    </section>
    <form class="composer" (ngSubmit)="sendMessage()">
      <input
        [(ngModel)]="userInput"
        name="message"
        type="text"
        placeholder="Escribe un mensaje..."
      />
      <div class="composer-actions">
        <button type="submit" class="send-btn">â¤</button>
        <button type="button" class="file-btn" title="AÃ±adir archivo">
          â•
        </button>
        <button type="button" class="voice-btn" title="Dictar por voz">
          ğŸ¤
        </button>
      </div>
    </form>
  </main>
</div>
